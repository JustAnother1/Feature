<?xml version="1.0" encoding="utf-8" ?>
<algorithm name="gpio" api="binaryOut,binaryIn">
  <configurationAttribute name="Port" type="character"/>
  <configurationAttribute name="Pin" type="unsigned integer"/>
  <required>
    <parameter ref="port" />
    <parameter ref="pin" />
  </required>

  <c_code>
    <additional>
      <include>avr/io.h</include>
    </additional>
    <function  name="initialize">
      <![CDATA[DDRB |= (1<<DDB5); //Set the 6th bit on PORTB (i.e. PB5) to 1 => output]]>
    </function>

    <function  name="setValue"  param0_type="bool" param0_name="on">
      <if cond="true equals param(on)">
        <![CDATA[PORTB |= (1<<PORTB5);    //Turn 6th bit on PORTB (i.e. PB5) to 1 => on]]>
      </if>
      <if cond="false equals param(on)">
        <![CDATA[PORTB &= ~(1<<PORTB5);    //Turn 6th bit on PORTB (i.e. PB5) to 0 => off]]>
      </if>
    </function>

<!--
    <function  name="setValue"  param0_type="bool" param0_name="on">
        <![CDATA[
        if(true == on)
        {
            PORTB |= (1<<PORTB5);    //Turn 6th bit on PORTB (i.e. PB5) to 1 => on
        }
        else
        {
            PORTB &= ~(1<<PORTB5);    //Turn 6th bit on PORTB (i.e. PB5) to 0 => off
        }]]>
    </function>
    -->
    <function  name="getValue" result="bool">
      <![CDATA[PORTB;]]>
    </function>
  </c_code>
</algorithm>
